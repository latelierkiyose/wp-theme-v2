/**
 * Contact Form 7 Override Styles
 *
 * Override CF7 default styles to match the Kiyose design system.
 * Ensures WCAG 2.2 AA compliance (contrasts, focus, targets 44x44px).
 *
 * @package Kiyose
 */

/* ========================================
   Form Container
   ======================================== */

.wpcf7 {
	margin: 0;
}

.wpcf7-form {
	display: flex;
	flex-direction: column;
	gap: var(--kiyose-spacing-lg);
}

/* ========================================
   Form Fields
   ======================================== */

/* Labels */
.wpcf7-form label {
	color: var(--kiyose-color-text);
	display: block;
	font-size: var(--kiyose-font-size-base);
	font-weight: 600;
	margin-bottom: var(--kiyose-spacing-sm);
}

/* Required indicator */
.wpcf7-form .wpcf7-form-control-wrap abbr[title] {
	color: #d32f2f; /* Rouge pour champs requis - contraste 7.13:1 sur fond blanc */
	font-weight: bold;
	text-decoration: none;
}

/* Input fields */
.wpcf7-form input[type="text"],
.wpcf7-form input[type="email"],
.wpcf7-form input[type="tel"],
.wpcf7-form input[type="url"],
.wpcf7-form select,
.wpcf7-form textarea {
	background-color: #ffffff;
	border: 2px solid var(--kiyose-color-border);
	border-radius: 6px;
	color: var(--kiyose-color-text);
	font-family: var(--kiyose-font-body);
	font-size: var(--kiyose-font-size-base);
	min-height: 44px;
	padding: var(--kiyose-spacing-md);
	transition: border-color 0.2s ease, box-shadow 0.2s ease;
	width: 100%;
}

/* Textarea specific */
.wpcf7-form textarea {
	min-height: 150px;
	resize: vertical;
}

/* Select dropdown */
.wpcf7-form select {
	appearance: none;
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%235D0505' d='M4 6l4 4 4-4z'/%3E%3C/svg%3E");
	background-position: right var(--kiyose-spacing-md) center;
	background-repeat: no-repeat;
	background-size: 16px;
	cursor: pointer;
	padding-right: var(--kiyose-spacing-3xl);
}

/* Focus state */
.wpcf7-form input[type="text"]:focus,
.wpcf7-form input[type="email"]:focus,
.wpcf7-form input[type="tel"]:focus,
.wpcf7-form input[type="url"]:focus,
.wpcf7-form select:focus,
.wpcf7-form textarea:focus {
	border-color: var(--kiyose-color-primary);
	box-shadow: 0 0 0 3px rgb(215 164 164 / 20%);
	outline: none;
}

/* Invalid state */
.wpcf7-form input[aria-invalid="true"],
.wpcf7-form select[aria-invalid="true"],
.wpcf7-form textarea[aria-invalid="true"],
.wpcf7-form .wpcf7-not-valid {
	border-color: #d32f2f;
}

.wpcf7-form input[aria-invalid="true"]:focus,
.wpcf7-form select[aria-invalid="true"]:focus,
.wpcf7-form textarea[aria-invalid="true"]:focus,
.wpcf7-form .wpcf7-not-valid:focus {
	box-shadow: 0 0 0 3px rgb(211 47 47 / 20%);
}

/* ========================================
   Submit Button
   ======================================== */

.wpcf7-form input[type="submit"],
.wpcf7-form button[type="submit"] {
	align-items: center;
	background-color: var(--kiyose-color-primary);
	border: 2px solid var(--kiyose-color-primary);
	border-radius: 8px;
	color: var(--kiyose-color-burgundy);
	cursor: pointer;
	display: inline-flex;
	font-family: var(--kiyose-font-body);
	font-size: var(--kiyose-font-size-base);
	font-weight: 600;
	justify-content: center;
	min-height: 44px;
	min-width: 44px;
	padding: var(--kiyose-spacing-md) var(--kiyose-spacing-xl);
	text-decoration: none;
	transition: background-color 0.2s ease, transform 0.2s ease;
}

.wpcf7-form input[type="submit"]:hover,
.wpcf7-form button[type="submit"]:hover {
	background-color: #c89494; /* 10% plus foncé */
}

@media (prefers-reduced-motion: no-preference) {
	.wpcf7-form input[type="submit"]:hover,
	.wpcf7-form button[type="submit"]:hover {
		transform: translateY(-2px);
	}
}

.wpcf7-form input[type="submit"]:focus,
.wpcf7-form button[type="submit"]:focus {
	outline: 2px solid var(--kiyose-color-burgundy);
	outline-offset: 2px;
}

.wpcf7-form input[type="submit"]:disabled,
.wpcf7-form button[type="submit"]:disabled {
	cursor: not-allowed;
	opacity: 0.5;
}

/* Submitting state */
.wpcf7-form.submitting input[type="submit"],
.wpcf7-form.submitting button[type="submit"] {
	cursor: wait;
	opacity: 0.6;
}

/* ========================================
   Error Messages (Inline)
   ======================================== */

.wpcf7-not-valid-tip {
	color: #d32f2f; /* Rouge - contraste 7.13:1 sur fond blanc */
	display: block;
	font-size: var(--kiyose-font-size-sm);
	font-weight: 600;
	margin-top: var(--kiyose-spacing-sm);
}

/* ========================================
   Response Messages (Global)
   ======================================== */

.wpcf7-response-output {
	border: 2px solid;
	border-radius: 8px;
	font-size: var(--kiyose-font-size-base);
	font-weight: 600;
	line-height: 1.5;
	margin: var(--kiyose-spacing-lg) 0 0;
	padding: var(--kiyose-spacing-md) var(--kiyose-spacing-lg);
}

/* Success message */
.wpcf7-mail-sent-ok {
	background-color: #e8f5e9; /* Vert clair */
	border-color: #4caf50;
	color: #1b5e20; /* Vert foncé - contraste 8.59:1 sur fond #e8f5e9 */
}

/* Error message */
.wpcf7-validation-errors,
.wpcf7-mail-sent-ng {
	background-color: #ffebee; /* Rouge clair */
	border-color: #d32f2f;
	color: #b71c1c; /* Rouge foncé - contraste 9.67:1 sur fond #ffebee */
}

/* Spam detected */
.wpcf7-spam-blocked {
	background-color: #fff3e0; /* Orange clair */
	border-color: #ff9800;
	color: #e65100; /* Orange foncé - contraste 6.27:1 sur fond #fff3e0 */
}

/* Invalid message */
.wpcf7-aborted {
	background-color: #e3f2fd; /* Bleu clair */
	border-color: #2196f3;
	color: #1565c0; /* Bleu foncé - contraste 6.27:1 sur fond #e3f2fd */
}

/* ========================================
   Loading Spinner
   ======================================== */

.wpcf7-spinner {
	animation: wpcf7-spin 0.6s linear infinite;
	border: 3px solid rgb(215 164 164 / 30%);
	border-radius: 50%;
	border-top-color: var(--kiyose-color-primary);
	display: inline-block;
	height: 24px;
	margin-left: var(--kiyose-spacing-md);
	vertical-align: middle;
	width: 24px;
}

@keyframes wpcf7-spin {
	to {
		transform: rotate(360deg);
	}
}

/* Respect prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
	.wpcf7-spinner {
		animation: none;
		border-right-color: var(--kiyose-color-primary);
		border-top-color: var(--kiyose-color-primary);
	}

	.wpcf7-form input[type="submit"],
	.wpcf7-form button[type="submit"] {
		transition: none;
	}
}

/* ========================================
   Checkboxes & Radio Buttons
   ======================================== */

.wpcf7-list-item {
	align-items: center;
	display: flex;
	margin: var(--kiyose-spacing-sm) 0;
}

.wpcf7-list-item-label {
	align-items: center;
	cursor: pointer;
	display: flex;
	gap: var(--kiyose-spacing-sm);
	min-height: 44px;
}

.wpcf7-form input[type="checkbox"],
.wpcf7-form input[type="radio"] {
	cursor: pointer;
	height: 20px;
	margin: 0;
	width: 20px;
}

.wpcf7-form input[type="checkbox"]:focus,
.wpcf7-form input[type="radio"]:focus {
	outline: 2px solid var(--kiyose-color-primary);
	outline-offset: 2px;
}

/* ========================================
   Acceptance (RGPD)
   ======================================== */

.wpcf7-acceptance {
	margin: var(--kiyose-spacing-lg) 0;
}

.wpcf7-acceptance .wpcf7-list-item-label {
	color: var(--kiyose-color-text);
	font-size: var(--kiyose-font-size-sm);
}

/* ========================================
   File Upload
   ======================================== */

.wpcf7-form input[type="file"] {
	cursor: pointer;
	font-size: var(--kiyose-font-size-base);
	padding: var(--kiyose-spacing-sm);
}

.wpcf7-form input[type="file"]:focus {
	outline: 2px solid var(--kiyose-color-primary);
	outline-offset: 2px;
}

/* ========================================
   Responsive
   ======================================== */

/* Mobile adjustments */
@media (width <= 767px) {
	.wpcf7-form {
		gap: var(--kiyose-spacing-md);
	}

	.wpcf7-form input[type="submit"],
	.wpcf7-form button[type="submit"] {
		width: 100%;
	}
}
