/**
 * Brevo Newsletter Form Override Styles
 *
 * Styles spécifiques pour le formulaire Brevo newsletter.
 * Surcharge les styles par défaut du plugin pour s'intégrer au design system.
 *
 * @package Kiyose
 * @since   0.1.13
 */

/* stylelint-disable no-descending-specificity */

/* ==========================================================================
   Container principal du formulaire Brevo
   ========================================================================== */

.sib-form {
	max-width: 100%;
	width: 100%;
}

/* ==========================================================================
   Layout footer — Formulaire compact
   ========================================================================== */

/**
 * Dans le footer : formulaire inline sur desktop (≥768px)
 * email + bouton sur une ligne
 */
.site-footer__newsletter .sib-form {
	margin-top: 1rem;
}

.site-footer__newsletter .sib-form__container {
	display: flex;
	flex-direction: column;
	gap: 0.75rem;
}

/* Desktop : champs inline */
@media (width >= 768px) {
	.site-footer__newsletter .sib-form__container {
		align-items: flex-end;
		flex-direction: row;
	}

	.site-footer__newsletter .sib-form__field {
		flex: 1;
	}

	.site-footer__newsletter .sib-form__button-wrapper {
		flex-shrink: 0;
	}
}

/* ==========================================================================
   Layout homepage — Formulaire spacieux
   ========================================================================== */

/**
 * Sur la homepage : formulaire plus aéré, labels au-dessus des champs
 */
.home-newsletter__content .sib-form {
	margin-top: 1.5rem;
}

.home-newsletter__content .sib-form__container {
	display: flex;
	flex-direction: column;
	gap: 1rem;
}

.home-newsletter__content .sib-form__field {
	width: 100%;
}

/* Desktop : grille 2 colonnes pour prénom/nom */
@media (width >= 768px) {
	.home-newsletter__content .sib-form__container {
		gap: 1.5rem;
	}

	.home-newsletter__content .sib-form__fields-row {
		display: grid;
		gap: 1rem;
		grid-template-columns: 1fr 1fr;
	}
}

/* ==========================================================================
   Champs de saisie
   ========================================================================== */

/**
 * Les styles de base sont définis dans plugins-common.css
 * Ici on surcharge uniquement les spécificités Brevo
 */

.sib-form__field {
	margin-bottom: 0;
}

.sib-form__label {
	color: var(--kiyose-color-text);
	display: block;
	font-family: var(--kiyose-font-body);
	font-size: 0.875rem;
	font-weight: 600;
	margin-bottom: 0.5rem;
}

.sib-form__input {
	min-height: 44px;
	width: 100%;
}

/* ==========================================================================
   Checkbox RGPD
   ========================================================================== */

.sib-form__checkbox {
	align-items: flex-start;
	display: flex;
	gap: 0.5rem;
	margin-bottom: 1rem;
}

.sib-form__checkbox input[type="checkbox"] {
	cursor: pointer;
	flex-shrink: 0;
	height: 18px;
	margin-top: 0.25rem;
	width: 18px;
}

.sib-form__checkbox label {
	cursor: pointer;
	font-size: 0.875rem;
	font-weight: 400;
	margin-bottom: 0;
}

.sib-form__checkbox label a {
	color: var(--kiyose-color-link);
	text-decoration: underline;
}

.sib-form__checkbox label a:hover,
.sib-form__checkbox label a:focus {
	color: var(--kiyose-color-link-hover);
}

/* ==========================================================================
   Bouton submit
   ========================================================================== */

/**
 * Les styles de base sont définis dans plugins-common.css
 * Ici on applique le style bouton--primary
 */

.sib-form__button-wrapper {
	margin-bottom: 0;
}

.sib-form button[type="submit"],
.sib-form input[type="submit"] {
	width: 100%;
}

/* Desktop footer : bouton auto-width */
@media (width >= 768px) {
	.site-footer__newsletter .sib-form button[type="submit"],
	.site-footer__newsletter .sib-form input[type="submit"] {
		width: auto;
	}
}

/* ==========================================================================
   Messages de succès et d'erreur
   ========================================================================== */

/**
 * Messages de succès
 * WCAG 2.2 AA : Contraste ≥4.5:1 validé
 * Vert foncé (#155724) sur fond vert clair (#d4edda) = 7.2:1
 */
.sib-form__message--success {
	background-color: #d4edda;
	border: 1px solid #c3e6cb;
	border-radius: 4px;
	color: #155724;
	font-size: 0.875rem;
	margin-top: 1rem;
	padding: 1rem;
}

.sib-form__message--success::before {
	content: "✓ ";
	font-weight: 700;
}

/**
 * Messages d'erreur
 * WCAG 2.2 AA : Contraste ≥4.5:1 validé
 * Rouge foncé (#721c24) sur fond rouge clair (#f8d7da) = 8.1:1
 */
.sib-form__message--error {
	background-color: #f8d7da;
	border: 1px solid #f5c6cb;
	border-radius: 4px;
	color: #721c24;
	font-size: 0.875rem;
	margin-top: 1rem;
	padding: 1rem;
}

.sib-form__message--error::before {
	content: "⚠ ";
	font-weight: 700;
}

/* ==========================================================================
   Messages de validation inline
   ========================================================================== */

.sib-form__field-error {
	color: #721c24;
	display: block;
	font-size: 0.75rem;
	margin-top: 0.25rem;
}

.sib-form__field--error .sib-form__input {
	border-color: #dc3545;
}

.sib-form__field--error .sib-form__input:focus {
	border-color: #dc3545;
	outline-color: #dc3545;
}

/* ==========================================================================
   Loading state
   ========================================================================== */

.sib-form--loading button[type="submit"],
.sib-form--loading input[type="submit"] {
	cursor: wait;
	opacity: 0.6;
}

/* ==========================================================================
   Responsive adjustments
   ========================================================================== */

/**
 * Mobile (<768px) : Champs empilés, bouton pleine largeur
 */
@media (width <= 767px) {
	.sib-form button[type="submit"],
	.sib-form input[type="submit"] {
		width: 100%;
	}

	.sib-form__checkbox {
		font-size: 0.8125rem;
	}
}

/* ==========================================================================
   Masquage d'éléments non souhaités
   ========================================================================== */

/**
 * Masquer les éléments de branding Brevo
 */
.sib-form__powered-by,
.sib-form__footer,
.sib-form-block__footer {
	display: none !important;
}

/* ==========================================================================
   Support prefers-reduced-motion
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
	.sib-form input,
	.sib-form button,
	.sib-form textarea,
	.sib-form select {
		transition: none;
	}
}
