class ShareLinkCopier{constructor(){this.buttons=document.querySelectorAll(".js-copy-link"),this.init()}init(){0!==this.buttons.length&&this.buttons.forEach(t=>{t.addEventListener("click",t=>this.handleCopy(t))})}async handleCopy(t){const e=t.currentTarget,o=e.dataset.url;if(o)try{await navigator.clipboard.writeText(o),this.showSuccess(e)}catch(t){this.fallbackCopy(o,e)}}fallbackCopy(t,e){const o=document.createElement("textarea");o.value=t,o.style.position="fixed",o.style.opacity="0",document.body.appendChild(o),o.focus(),o.select();try{document.execCommand("copy"),this.showSuccess(e)}catch(t){console.error("Failed to copy link:",t),this.showError(e)}document.body.removeChild(o)}showSuccess(t){t.classList.add("copied");const e=t.getAttribute("aria-label");t.setAttribute("aria-label","Lien copié !");const o=this.createNotification("Lien copié ! Vous pouvez maintenant le coller sur Instagram.");t.parentElement.appendChild(o),setTimeout(()=>{t.classList.remove("copied"),t.setAttribute("aria-label",e),o.remove()},3e3)}showError(t){const e=this.createNotification("Erreur lors de la copie du lien.","error");t.parentElement.appendChild(e),setTimeout(()=>{e.remove()},3e3)}createNotification(t,e="success"){const o=document.createElement("div");return o.className=`copy-notification copy-notification--${e}`,o.setAttribute("role","status"),o.setAttribute("aria-live","polite"),o.textContent=t,o}}export default ShareLinkCopier;