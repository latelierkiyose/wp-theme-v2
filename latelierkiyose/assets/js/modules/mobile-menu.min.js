export default class MobileMenu{constructor(){this.hamburgerButton=document.querySelector(".hamburger-button"),this.mobileMenu=document.getElementById("mobile-menu"),this.overlay=document.querySelector(".mobile-menu-overlay"),this.closeButton=document.querySelector(".mobile-menu__close"),this.hamburgerButton&&this.mobileMenu&&this.overlay&&(this.isOpen=!1,this.focusableElements=[],this.firstFocusableElement=null,this.lastFocusableElement=null,this.init())}init(){this.hamburgerButton.addEventListener("click",()=>this.open()),this.closeButton?.addEventListener("click",()=>this.close()),this.overlay.addEventListener("click",()=>this.close()),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.isOpen&&this.close()}),this.mobileMenu.addEventListener("keydown",e=>{"Tab"===e.key&&this.isOpen&&this.handleTab(e)}),this.updateFocusableElements()}updateFocusableElements(){const e=["a[href]","button:not([disabled])","input:not([disabled])","textarea:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(", ");this.focusableElements=Array.from(this.mobileMenu.querySelectorAll(e)),this.focusableElements.length>0&&(this.firstFocusableElement=this.focusableElements[0],this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1])}handleTab(e){0!==this.focusableElements.length&&(e.shiftKey?document.activeElement===this.firstFocusableElement&&(e.preventDefault(),this.lastFocusableElement.focus()):document.activeElement===this.lastFocusableElement&&(e.preventDefault(),this.firstFocusableElement.focus()))}open(){this.isOpen||(this.isOpen=!0,this.hamburgerButton.setAttribute("aria-expanded","true"),this.hamburgerButton.setAttribute("aria-label","Fermer le menu de navigation"),this.mobileMenu.setAttribute("aria-hidden","false"),this.overlay.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",this.updateFocusableElements(),this.closeButton?this.closeButton.focus():this.firstFocusableElement&&this.firstFocusableElement.focus())}close(){this.isOpen&&(this.isOpen=!1,this.hamburgerButton.setAttribute("aria-expanded","false"),this.hamburgerButton.setAttribute("aria-label","Ouvrir le menu de navigation"),this.mobileMenu.setAttribute("aria-hidden","true"),this.overlay.setAttribute("aria-hidden","true"),document.body.style.overflow="",this.hamburgerButton.focus())}}