export class KiyoseCarousel{constructor(t){this.carousel=t,this.track=t.querySelector(".carousel__track"),this.slides=Array.from(t.querySelectorAll(".carousel__slide")),this.prevButton=t.querySelector(".carousel__prev"),this.nextButton=t.querySelector(".carousel__next"),this.pauseButton=t.querySelector(".carousel__pause"),this.currentIndex=0,this.isPlaying=!1,this.autoplayInterval=null,this.autoplayDelay=5e3,this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.handlePrevClick=this.handlePrevClick.bind(this),this.handleNextClick=this.handleNextClick.bind(this),this.handlePauseClick=this.handlePauseClick.bind(this),this.handleKeydown=this.handleKeydown.bind(this)}init(){this.track&&0!==this.slides.length&&(this.carousel.setAttribute("data-carousel-initialized","true"),this.updateSlides(),this.updateControls(),this.prevButton&&this.prevButton.addEventListener("click",this.handlePrevClick),this.nextButton&&this.nextButton.addEventListener("click",this.handleNextClick),this.pauseButton&&this.pauseButton.addEventListener("click",this.handlePauseClick),this.carousel.addEventListener("keydown",this.handleKeydown),this.prefersReducedMotion||this.startAutoplay())}goToSlide(t){t<0?t=this.slides.length-1:t>=this.slides.length&&(t=0),this.currentIndex=t,this.updateSlides(),this.updateControls()}nextSlide(){this.goToSlide(this.currentIndex+1)}prevSlide(){this.goToSlide(this.currentIndex-1)}updateSlides(){this.slides.forEach((t,e)=>{const i=e===this.currentIndex;t.classList.toggle("carousel__slide--active",i),t.setAttribute("aria-hidden",!i),t.setAttribute("aria-label",`${e+1} sur ${this.slides.length}`),t.querySelectorAll("a, button, input, textarea, select").forEach(t=>{t.setAttribute("tabindex",i?"0":"-1")})});const t=100*-this.currentIndex;this.track.style.transform=`translateX(${t}%)`}updateControls(){}startAutoplay(){this.isPlaying||(this.isPlaying=!0,this.track&&this.track.setAttribute("aria-live","off"),this.pauseButton&&(this.pauseButton.setAttribute("aria-label","Mettre en pause le défilement automatique"),this.pauseButton.textContent="⏸"),this.autoplayInterval=setInterval(()=>{this.nextSlide()},this.autoplayDelay))}stopAutoplay(){this.isPlaying&&(this.isPlaying=!1,this.track&&this.track.setAttribute("aria-live","polite"),this.pauseButton&&(this.pauseButton.setAttribute("aria-label","Reprendre le défilement automatique"),this.pauseButton.textContent="▶"),this.autoplayInterval&&(clearInterval(this.autoplayInterval),this.autoplayInterval=null))}toggleAutoplay(){this.isPlaying?this.stopAutoplay():this.startAutoplay()}handlePrevClick(){this.stopAutoplay(),this.prevSlide()}handleNextClick(){this.stopAutoplay(),this.nextSlide()}handlePauseClick(){this.toggleAutoplay()}handleKeydown(t){if(this.carousel.contains(document.activeElement))switch(t.key){case"ArrowLeft":t.preventDefault(),this.stopAutoplay(),this.prevSlide();break;case"ArrowRight":t.preventDefault(),this.stopAutoplay(),this.nextSlide()}}destroy(){this.stopAutoplay(),this.prevButton&&this.prevButton.removeEventListener("click",this.handlePrevClick),this.nextButton&&this.nextButton.removeEventListener("click",this.handleNextClick),this.pauseButton&&this.pauseButton.removeEventListener("click",this.handlePauseClick),this.carousel.removeEventListener("keydown",this.handleKeydown)}}